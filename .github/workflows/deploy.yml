name: Deploy to Tencent Cloud

on:
  push:
    branches:
      - master  # 仅在推送到 main 分支时触发

jobs:
  deploy:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout code
        uses: actions/checkout@v3

      - name: Run deployment script via SSH
        uses: appleboy/ssh-action@v0.1.2
        with:
          host: 110.42.138.166  # 腾讯云服务器的 IP
          username: centos  # 服务器用户名
          key: -----BEGIN OPENSSH PRIVATE KEY-----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-----END OPENSSH PRIVATE KEY-----
  # SSH 私钥
          script: |
            cd /scripts/deploy.sh
            git pull origin master
            npm install
            npm run build
            pm2 restart all
